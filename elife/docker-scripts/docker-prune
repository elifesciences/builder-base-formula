#!/bin/bash
set -e

# default: 14 days
hours_limit="${1:-336}"

docker container prune --force
# disabled due to race condition with `docker-compose up`
# docker network prune --force
docker volume prune --force

echo "Clean up all images not used in the last $hours_limit hours"
docker image prune --all --filter "until=${hours_limit}h" --force
